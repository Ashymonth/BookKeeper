If not Exists (select loginname from master.dbo.syslogins where name = '{0}')
    CREATE LOGIN {0} WITH PASSWORD = '{1}'

Use [{2}]

IF NOT EXISTS (SELECT * FROM sys.database_principals WHERE name = N'{0}')
BEGIN
    CREATE USER [{0}] FOR LOGIN [{0}]
    EXEC sp_addrolemember N'db_owner', N'{0}'
    EXEC master..sp_addsrvrolemember N'{0}', N'sysadmin'
END;